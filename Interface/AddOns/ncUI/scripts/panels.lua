local db = ncUIdb["chat"]local barbg = CreateFrame("Frame", "ActionBarBackground", UIParent)ncUIdb:CreatePanel(barbg, 699, 50, "BOTTOM", UIParent, "BOTTOM", 0, 8)barbg:RegisterEvent("PLAYER_ENTERING_WORLD")barbg:SetScript("OnEvent", function(self)	self:SetWidth(ncUIdb:Scale(MultiBarBottomLeftButton8:GetRight()-ActionButton1:GetLeft()+11))end)local ileft = CreateFrame("Frame", "InfoLeft", barbg)ncUIdb:CreatePanel(ileft, 350, 30, "BOTTOMLEFT", UIParent, "BOTTOMLEFT", 44, 18)local iright = CreateFrame("Frame", "InfoRight", barbg)ncUIdb:CreatePanel(iright, 350, 30, "BOTTOMRIGHT", UIParent, "BOTTOMRIGHT", -44, 18)local ltoabl = CreateFrame("Frame", "LineToABLeft", barbg)ncUIdb:CreatePanel(ltoabl, 5, 3, "BOTTOMRIGHT", UIParent, "BOTTOMRIGHT", 0, 0)ltoabl:ClearAllPoints()ltoabl:SetPoint("LEFT", ileft, "RIGHT", 1, 0)ltoabl:SetPoint("RIGHT", barbg, "LEFT", -2, 0)local ltoabr = CreateFrame("Frame", "LineToABRight", barbg)ncUIdb:CreatePanel(ltoabr, 5, 3, "BOTTOMRIGHT", UIParent, "BOTTOMRIGHT", 0, 0)ltoabr:ClearAllPoints()ltoabr:SetPoint("LEFT", barbg, "RIGHT", 1, 0)ltoabr:SetPoint("RIGHT", iright, "LEFT", -2, 0)local irightl = CreateFrame("Frame", "InfoRightLine", iright)ncUIdb:CreatePanel(irightl, 14, 3, "LEFT", iright, "RIGHT", 1, 0)local ileftl = CreateFrame("Frame", "InfoLeftLine", ileft )ncUIdb:CreatePanel(ileftl, 14, 3, "RIGHT", ileft, "LEFT", -2, 0)local irightlv = CreateFrame("Frame", "InfoRightLineVertical", irightl)ncUIdb:CreatePanel(irightlv, 3, 179, "BOTTOMRIGHT", irightl, "TOPRIGHT", 0, 0)local ileftlv = CreateFrame("Frame", "InfoLeftLineVertical", ileftl)ncUIdb:CreatePanel(ileftlv, 3, 179, "BOTTOMLEFT", ileftl, "TOPLEFT", 0, 0)local cubeleft = CreateFrame("Frame", "CubeLeft", ileftlv)ncUIdb:CreatePanel(cubeleft, 8, 8, "CENTER", ileftlv, "TOP", 0, 0)cubeleft:SetBackdropColor(unpack(ncUIdb["general"].colorscheme_border))cubeleft:SetFrameLevel(2)local cubeleftbg = CreateFrame("Frame", "CubeLeftBG", ileftlv)ncUIdb:CreatePanel(cubeleftbg, 11, 11, "CENTER", ileftlv, "TOP", 0, 0)cubeleftbg:SetBackdropBorderColor(unpack(ncUIdb["general"].colorscheme_backdrop))local cuberight = CreateFrame("Frame", "CubeRight", irightlv)ncUIdb:CreatePanel(cuberight, 8, 8, "CENTER", irightlv, "TOP", 0, 0)cuberight:SetBackdropColor(unpack(ncUIdb["general"].colorscheme_border))cuberight:SetFrameLevel(2)local cuberightbg = CreateFrame("Frame", "CubeRightBG", irightlv)ncUIdb:CreatePanel(cuberightbg, 11, 11, "CENTER", irightlv, "TOP", 0, 0)cuberightbg:SetBackdropBorderColor(unpack(ncUIdb["general"].colorscheme_backdrop))local edit = CreateFrame("Frame", "ChatFrameEditBoxBackground", ChatFrameEditBox)ncUIdb:CreatePanel(edit, 1, 1, "LEFT", "ChatFrameEditBox", "LEFT", 0, 0)edit:ClearAllPoints()edit:SetAllPoints(ileft)edit:SetBackdropBorderColor(unpack(ncUIdb["chat"].colorscheme_editbox))edit:SetFrameLevel(3)local petbg = CreateFrame("Frame", "PetActionBarBackground", PetActionButton1)ncUIdb:CreatePanel(petbg, 47, 419, "RIGHT", UIParent, "RIGHT", -8, 0)local ltpetbg = CreateFrame("Frame", "LineToPetActionBarBackground", petbg)ncUIdb:CreatePanel(ltpetbg, 3, 40, "TOP", petbg, "BOTTOM", 0, -1)local ltpetbg2 = CreateFrame("Frame", "LineToPetActionBarBackground2", petbg)ncUIdb:CreatePanel(ltpetbg2, 3, 40, "BOTTOM", petbg, "TOP", 0, 2)local cubetop = CreateFrame("Frame", "CubeTop", ltpetbg2)ncUIdb:CreatePanel(cubetop, 8, 8, "CENTER", ltpetbg2, "TOP", 0, 0)cubetop:SetBackdropColor(unpack(ncUIdb["general"].colorscheme_border))cubetop:SetFrameLevel(2)local cubetopbg = CreateFrame("Frame", "CubeTopBG", ltpetbg2)ncUIdb:CreatePanel(cubetopbg, 11, 11, "CENTER", ltpetbg2, "TOP", 0, 0)cubetopbg:SetBackdropBorderColor(unpack(ncUIdb["general"].colorscheme_backdrop))local cubebottom = CreateFrame("Frame", "CubeBottom", ltpetbg)ncUIdb:CreatePanel(cubebottom, 8, 8, "CENTER", ltpetbg, "BOTTOM", 0, 0)cubebottom:SetBackdropColor(unpack(ncUIdb["general"].colorscheme_border))cubebottom:SetFrameLevel(2)local cubebottombg = CreateFrame("Frame", "CubeBottomBG", ltpetbg)ncUIdb:CreatePanel(cubebottombg, 11, 11, "CENTER", ltpetbg, "BOTTOM", 0, 0)cubebottombg:SetBackdropBorderColor(unpack(ncUIdb["general"].colorscheme_backdrop))function updatebars(self, num)	num = floor(num*6+.5)	for f = 1,num do		self.bars[f]:SetAlpha(1)	end	for f = (num+1),6 do		self.bars[f]:SetAlpha(.2)	endendlocal function update(self, e)	self.e = self.e - e	if self.e < 0 then		updatebars(self, self:GetValue())		self.e = 1	endendlocal statsleft = CreateFrame("Frame", "MinimapStatsLeft", Minimap)ncUIdb:CreatePanel(statsleft, 39, 21, "TOPLEFT", Minimap, "BOTTOMLEFT", -3, -7)statsleft:EnableMouse(true)statsleft:SetScript("OnMouseDown", function()	ToggleBackpack()end)statsleft:SetFrameLevel(3)statsleft.e = 1statsleft.bars = {}function statsleft:GetValue()	local totfree = 0	local tot = 0	for i=0,4 do		totfree = totfree + GetContainerNumFreeSlots(i)		tot = tot + GetContainerNumSlots(i)	end	return totfree/totendlocal height = 2for f=1, 6 do	statsleft.bars[f] = CreateFrame ("Frame",nil, UIParent)	ncUIdb:CreatePanel(statsleft.bars[f], 1, height, "TOP", Minimap, "BOTTOM", 0, -5)	statsleft.bars[f]:ClearAllPoints()	statsleft.bars[f]:SetFrameLevel(4)	if f==1 then		statsleft.bars[f]:SetPoint("BOTTOMLEFT",statsleft,"BOTTOMLEFT", 5, 4)	end	if f>1 then		statsleft.bars[f]:SetPoint("BOTTOMLEFT",statsleft.bars[f-1],"BOTTOMRIGHT", ncUIdb:Scale(4), 0)	end	height = height+2endstatsleft:SetScript("OnUpdate", update)update(statsleft, 10)local statsright = CreateFrame("Frame", "MinimapStatsRight", Minimap)ncUIdb:CreatePanel(statsright, 39, 21, "TOPRIGHT", Minimap, "BOTTOMRIGHT", 2, -7)statsright:EnableMouse(true)statsright:SetScript("OnMouseDown", function()	ToggleCharacter("PaperDollFrame")end)statsright:SetFrameLevel(3)statsright.e = 1statsright.bars = {}function statsright:GetValue()	local curDur, maxDur = 0,0	for i = 1, 20 do		local curD, maxD = GetInventoryItemDurability(i)		if maxD then			curDur = curDur + curD			maxDur = maxDur + maxD		end	end	if maxDur==0 then		return 1	else		return curDur/maxDur	endendlocal height = 2for f=1, 6 do	statsright.bars[f] = CreateFrame("Frame",nil, UIParent)	ncUIdb:CreatePanel(statsright.bars[f], 1, height, "TOP", Minimap, "BOTTOM", 0, -5)	statsright.bars[f]:ClearAllPoints()	statsright.bars[f]:SetFrameLevel(4)	if f==1 then		statsright.bars[f]:SetPoint("BOTTOMRIGHT",statsright,"BOTTOMRIGHT", -5, 4)	end	if f>1 then		statsright.bars[f]:SetPoint("BOTTOMRIGHT",statsright.bars[f-1],"BOTTOMLEFT", ncUIdb:Scale(-4), 0)	end	height = height+2endstatsright:SetScript("OnUpdate", update)update(statsright, 10)local minimaptime = CreateFrame("Frame", "MinimapTime", Minimap)ncUIdb:CreatePanel(minimaptime, 1, 21, "TOP", Minimap, "BOTTOM", 0, -7)minimaptime:SetPoint("LEFT", statsleft, "RIGHT", 4, 0)minimaptime:SetPoint("RIGHT", statsright, "LEFT", -4, 0)minimaptime:EnableMouse(true)minimaptime.e = 1local text  = minimaptime:CreateFontString(nil, "OVERLAY")text:SetFont(ncUIdb["media"].pixelfont, 11)text:SetPoint("CENTER", 1, 0)text:SetTextColor(unpack(ncUIdb["general"].colorscheme_border))local function Update(self, e)	local pending = CalendarGetNumPendingInvites()	minimaptime.e = minimaptime.e - e	if minimaptime.e < 0 then		local Hr, Min = GetGameTime()		if Hr == 0 then Hr = 12 end		if Min<10 then Min = "0"..Min end		if time24 == true then         		   text:SetText(Hr..":"..Min)		else             		   if Hr>=12 then			  Hr = Hr-12			  if pending > 0 then				text:SetText("|cffFF0000"..Hr..":"..Min.." |rPM")			  else				text:SetText(Hr..":"..Min.." |rPM")			  end		   else			  if pending > 0 then				text:SetText("|cffFF0000"..Hr..":"..Min.." |rAM")			  else				text:SetText(Hr..":"..Min.." |ram")			  end		   end		end		minimaptime.e = 1	endendminimaptime:SetScript("OnEnter", function(self)	if not InCombatLockdown() then		GameTooltip:SetOwner(this, "ANCHOR_CURSOR")		GameTooltip:ClearLines()		local wgtime = GetWintergraspWaitTime() or nil		_, instance = IsInInstance()		if not (instance=="none") then			wgtime = "Unavailable"		elseif wgtime == nil then			wgtime = "In Progress"		else			local hour = tonumber(format("%01.f", floor(wgtime/3600)))			local min = format(hour>0 and "%02.f" or "%01.f", floor(wgtime/60 - (hour*60)))			local sec = format("%02.f", floor(wgtime - hour*3600 - min *60))							wgtime = (hour>0 and hour..":" or "")..min..":"..sec						end		GameTooltip:AddDoubleLine("Time to Wintergrasp:",wgtime)		GameTooltip:Show()	end	end)minimaptime:SetScript("OnLeave", function() GameTooltip:Hide() end)minimaptime:RegisterEvent("CALENDAR_UPDATE_PENDING_INVITES")minimaptime:RegisterEvent("PLAYER_ENTERING_WORLD")minimaptime:SetScript("OnUpdate", Update)minimaptime:SetScript("OnMouseDown", function() GameTimeFrame:Click() end)Update(minimaptime, 10)